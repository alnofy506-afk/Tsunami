local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "سكربت تسونامي",
   LoadingTitle = "جاري التشغيل...",
   LoadingSubtitle = "Made by ع",
   ConfigurationSaving = { Enabled = false }
})

-- إظهار رسالة تنبيه عند بداية التشغيل (كما هي)
Rayfield:Notify({
    Title = "تنبية",
    Content = "السكربت تجريبي",
    Duration = 5,
    Image = 4483362458,
})

local MainTab = Window:CreateTab("قائمة التحكم", 4483362458)
local TeleportTab = Window:CreateTab("قائمة التنقل", 4483362458) 
local PlayerTab = Window:CreateTab("قائمة اللاعب", 4483362458)

-- متغيرات التحكم
_G.AutoArcade = false
_G.AutoDefault = false
_G.AutoCollectMoney = false
_G.AutoATM = false
_G.AutoBlackhole = false
_G.FlyEnabled = false
_G.FlySpeed = 50 
_G.AntiAFK = true

-- [ تحسين نظام الـ Anti-AFK المطور ]
local VirtualUser = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    if _G.AntiAFK then
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end
end)

-- وظيفة جلب الـ Plot ID
local function getMyPlotID()
    local player = game.Players.LocalPlayer
    local foundID = nil
    pcall(function()
        for _, plot in pairs(workspace:WaitForChild("Plots"):GetChildren()) do
            if plot:FindFirstChild("Owner") and plot.Owner.Value == player then
                foundID = plot.Name
            end
        end
    end)
    return foundID or "{02431b3a-5fcf-40e4-90aa-220317656166}"
end

-- وظيفة التنبيه
local function sendStatusNotify(title, status)
    Rayfield:Notify({
        Title = title,
        Content = status,
        Duration = 3,
        Image = 4483362458,
    })
end

-------------------------------------------------------
-- [ قائمة التحكم - MainTab ]
-------------------------------------------------------

MainTab:CreateToggle({
   Name = "تجميع الأموال تلقائياً",
   CurrentValue = false,
   Flag = "CollectMoneyToggle", 
   Callback = function(Value)
       _G.AutoCollectMoney = Value
       sendStatusNotify("تجميع الأموال", Value and "تم التشغيل ✅" or "تم الإيقاف ❌")
       if Value then
           task.spawn(function()
               while _G.AutoCollectMoney do
                   local currentPlotID = getMyPlotID()
                   for i = 1, 36 do
                       if not _G.AutoCollectMoney then break end
                       pcall(function()
                           game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/Plot.PlotAction"):InvokeServer("Collect Money", currentPlotID, tostring(i))
                       end)
                       task.wait(0.01)
                   end
                   task.wait(0.5)
               end
           end)
       end
   end,
})

-- زر Blackhole
MainTab:CreateToggle({
   Name = "Blackhole",
   CurrentValue = false,
   Flag = "BlackholeToggle",
   Callback = function(Value)
       _G.AutoBlackhole = Value
       sendStatusNotify("نظام Blackhole", Value and "تم التشغيل ✅" or "تم الإيقاف ❌")
       if Value then
           task.spawn(function()
               local blackholeMachine = workspace:WaitForChild("SpawnMachines"):WaitForChild("Blackhole")
               local net = game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/SpawnMachine.Action")
               while _G.AutoBlackhole do
                   pcall(function()
                       net:InvokeServer("Deposit", blackholeMachine)
                       net:InvokeServer("Combine", blackholeMachine)
                   end)
                   task.wait(0.4)
               end
           end)
       end
   end,
})

-- زر Money
MainTab:CreateToggle({
   Name = "Money",
   CurrentValue = false,
   Flag = "ATMToggle",
   Callback = function(Value)
       _G.AutoATM = Value
       sendStatusNotify("نظام Money", Value and "تم التشغيل ✅" or "تم الإيقاف ❌")
       if Value then
           task.spawn(function()
               local atmMachine = workspace:WaitForChild("SpawnMachines"):WaitForChild("ATM")
               local net = game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/SpawnMachine.Action")
               while _G.AutoATM do
                   pcall(function()
                       net:InvokeServer("Deposit", atmMachine)
                       net:InvokeServer("Combine", atmMachine)
                   end)
                   task.wait(0.5)
               end
           end)
       end
   end,
})

-- زر Arcade (تمت إعادته)
MainTab:CreateToggle({
   Name = "Arcade",
   CurrentValue = false,
   Flag = "ArcadeToggle", 
   Callback = function(Value)
       _G.AutoArcade = Value
       sendStatusNotify("نظام Arcade", Value and "تم التشغيل ✅" or "تم الإيقاف ❌")
       if Value then
           task.spawn(function()
               local arcadeMachine = workspace:WaitForChild("SpawnMachines"):WaitForChild("Arcade")
               local net = game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/SpawnMachine.Action")
               while _G.AutoArcade do
                   pcall(function()
                       net:InvokeServer("Deposit", arcadeMachine)
                       net:InvokeServer("Combine", arcadeMachine)
                   end)
                   task.wait(0.4)
               end
           end)
       end
   end,
})

MainTab:CreateButton({
   Name = "إيقاف جميع العمليات",
   Callback = function()
       _G.AutoArcade = false
       _G.AutoCollectMoney = false
       _G.AutoATM = false
       _G.AutoBlackhole = false
       sendStatusNotify("إيقاف الكل", "تم تعطيل الميزات ⚠️")
   end,
})

-------------------------------------------------------
-- بقية السكربت (التنقل واللاعب وتخطي الكول داون)
-------------------------------------------------------

local Locations = {
    Vector3.new(245.67, 3.31, -135.75), 
    Vector3.new(340.06, 3.31, -136.75), 
    Vector3.new(925.12, 3.31, -137.01)  
}

TeleportTab:CreateButton({
   Name = ".",
   Callback = function()
       local character = game.Players.LocalPlayer.Character
       local rootPart = character and character:FindFirstChild("HumanoidRootPart")
       if rootPart then
           for i, pos in ipairs(Locations) do
               rootPart.CFrame = CFrame.new(pos)
               task.wait(0.1)
           end
           Rayfield:Notify({ Duration = 2, Image = 4483362458 })
       end
   end,
})

local TimeLabel = PlayerTab:CreateLabel("مدة التشغيل: 0 ساعة، 0 دقيقة، 0 ثانية")
task.spawn(function()
    local startTime = tick()
    while task.wait(1) do
        local elapsed = math.floor(tick() - startTime)
        local hours = math.floor(elapsed / 3600)
        local minutes = math.floor((elapsed % 3600) / 60)
        local seconds = elapsed % 60
        TimeLabel:Set("مدة التشغيل: " .. hours .. " ساعة، " .. minutes .. " دقيقة، " .. seconds .. " ثانية")
    end
end)

PlayerTab:CreateToggle({
   Name = "منع الطرد (Anti-AFK)",
   CurrentValue = true,
   Flag = "AntiAFK",
   Callback = function(Value)
       _G.AntiAFK = Value
       sendStatusNotify("Anti-AFK", Value and "تم التفعيل" or "تم الإيقاف")
   end,
})

PlayerTab:CreateToggle({
   Name = "تفعيل الطيران",
   CurrentValue = false,
   Flag = "FlyToggle",
   Callback = function(Value)
       _G.FlyEnabled = Value
       local player = game.Players.LocalPlayer
       local character = player.Character or player.CharacterAdded:Wait()
       local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
       if Value then
           task.spawn(function()
               local bodyVelocity = Instance.new("BodyVelocity", humanoidRootPart)
               bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
               local bodyGyro = Instance.new("BodyGyro", humanoidRootPart)
               bodyGyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
               while _G.FlyEnabled do
                   local camera = workspace.CurrentCamera
                   local moveDirection = Vector3.new(0, 0, 0)
                   local UIS = game:GetService("UserInputService")
                   if UIS:IsKeyDown(Enum.KeyCode.W) then moveDirection = moveDirection + camera.CFrame.LookVector end
                   if UIS:IsKeyDown(Enum.KeyCode.S) then moveDirection = moveDirection - camera.CFrame.LookVector end
                   if UIS:IsKeyDown(Enum.KeyCode.A) then moveDirection = moveDirection - camera.CFrame.RightVector end
                   if UIS:IsKeyDown(Enum.KeyCode.D) then moveDirection = moveDirection + camera.CFrame.RightVector end
                   bodyVelocity.Velocity = moveDirection * _G.FlySpeed
                   bodyGyro.CFrame = camera.CFrame
                   task.wait()
               end
               bodyVelocity:Destroy()
               bodyGyro:Destroy()
           end)
       end
   end,
})

PlayerTab:CreateSlider({
   Name = "سرعة الطيران",
   Range = {16, 500},
   Increment = 1,
   CurrentValue = 50,
   Callback = function(Value) _G.FlySpeed = Value end,
})

-- تخطي الكول داون
for _, prompt in pairs(game:GetDescendants()) do
    if prompt:IsA("ProximityPrompt") then prompt.HoldDuration = 0 end
end
game.DescendantAdded:Connect(function(d)
    if d:IsA("ProximityPrompt") then d.HoldDuration = 0 end
end)

PlayerTab:CreateButton({
   Name = "تفعيل زووم لا نهائي (Infinite Zoom)",
   Callback = function()
       local player = game.Players.LocalPlayer
       player.CameraMaxZoomDistance = 100000 -- مسافة هائلة للتبعيد
       player.CameraMinZoomDistance = 0      -- إمكانية التقريب حتى الاختفاء
       sendStatusNotify("الزووم", "تم فك حدود الكاميرا ✅")
   end,
})
